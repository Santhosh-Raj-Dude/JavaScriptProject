<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Group Chat</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .chat-container {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            background-color: white;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 10px;
        }
        .message {
            margin-bottom: 10px;
        }
        .message-time {
            font-size: 0.8rem;
            color: gray;
        }
        .input-group {
            position: fixed;
            bottom: 20px;
            left: 0;
            right: 0;
            padding: 0 20px;
        }
    </style>
</head>

<body>
    <div class="container mt-4">
        <h2>Group Chat</h2>
        <p id="userName" class="text-muted"></p>
        <p id="currentTime" class="text-muted"></p>
        <div class="chat-container" id="chatContainer"></div>

        <div class="input-group">
            <input type="text" id="messageInput" class="form-control" placeholder="Type your message..." required>
            <button class="btn btn-primary" id="sendMessage">Send</button>
        </div>
    </div>

    <script>
        const loggedInUser = "anne.hunter@gmail.com";
        document.getElementById("userName").innerText = `Logged in as: ${loggedInUser}`;
        function updateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' };
            document.getElementById("currentTime").innerText = now.toLocaleString(undefined, options);
        }
        updateTime();
        setInterval(updateTime, 1000);
        function displayMessages() {
            const chatContainer = document.getElementById("chatContainer");
            const messages = JSON.parse(localStorage.getItem("chats")) || [];

            chatContainer.innerHTML = "";
            messages.forEach(msg => {
                const messageElement = document.createElement("div");
                messageElement.className = "message";
                messageElement.innerHTML = `<strong>${msg.user}</strong>: ${msg.text} <div class="message-time">${msg.time}</div>`;
                chatContainer.appendChild(messageElement);
            });

            chatContainer.scrollTop = chatContainer.scrollHeight; 
        }
        document.getElementById("sendMessage").addEventListener("click", function () {
            const messageInput = document.getElementById("messageInput");
            const messageText = messageInput.value;

            if (messageText.trim() === "") return; 

            const now = new Date();
            const messageTime = now.toLocaleString();

            const messages = JSON.parse(localStorage.getItem("chats")) || [];
            messages.push({ user: loggedInUser, text: messageText, time: messageTime });
            localStorage.setItem("chats", JSON.stringify(messages));

            messageInput.value = ""; 
            displayMessages(); 
        });
        displayMessages();
    </script>
</body>

</html>
